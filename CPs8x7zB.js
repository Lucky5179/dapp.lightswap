import{cZ as j,cn as r,cv as s,cO as k,cI as I,cA as a,cP as S,et as L,cy as T,db as $,f2 as p,L as m,e$ as z,dC as D,f7 as P,f8 as R,cJ as w,eg as M,cz as V,er as F,cT as W}from"./assets/index-POi8GhpC.js";import{S as E}from"./B5uxAM4_.js";import{T as B}from"./DlFdII4L.js";import{g as b,u as O,a as Y,S as J}from"./DTumzE8u.js";import{n as N}from"./Csp7GRD1.js";import"./DPMYbftn.js";import"./DdNi1zY5.js";import"./DLie8hhL.js";import"./CTyLih9z.js";import"./iCHHcf-3.js";import"./Bcp9QaNf.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new o.Error().stack;t&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[t]="342dd4b8-b20d-4e58-8dc9-7960893ad6ef",o._sentryDebugIdIdentifier="sentry-dbid-342dd4b8-b20d-4e58-8dc9-7960893ad6ef")}catch{}})();const G=o=>{const{setWatchList:t,nodeWatchList:i}=j(),d=r.useCallback(e=>{if(i.includes(e)){const n=i.filter(l=>l!==e);t(n)}else t([e,...i])},[t,i]);return r.useMemo(()=>[{id:"Bookmark",Header:()=>s.jsx(k,{className:"group-hover:text-dark-typo-primary",color:"secondary",iconName:"refresh",onClick:o,size:12}),align:"center",disableSortBy:!0,accessor:e=>e,Cell:({cell:{value:e}})=>{const n=i.includes(e.node_address);return s.jsx(I,{className:"w-fit m-auto",content:n?a("views.nodes.removeFromList"):a("views.nodes.addToWatch"),children:s.jsx(k,{color:n?"pink":"secondary",iconHoverHighlight:!1,iconName:n?"heartFilled":"heart",onClick:l=>{d(e.node_address),l.stopPropagation(),l.preventDefault()},size:16})})}},{id:"Address",Header:()=>a("common.address"),align:"center",accessor:e=>e.node_address,disableSortBy:!0,Cell:({cell:{value:e}})=>s.jsx(S,{className:"!px-2 justify-items-start",onClick:n=>{L(e),n.stopPropagation(),n.preventDefault()},rightIcon:s.jsx(T,{name:"copy",size:16}),tooltip:a("common.copy"),tooltipClasses:"mx-auto w-fit",transform:"none",variant:"borderlessTint",children:$(e,6,4)})},{id:"Version",Header:()=>a("views.nodes.version"),accessor:"version"},{id:"IP",Header:()=>"IP",accessor:"ip_address",minScreenSize:p.md,disableSortBy:!0},{id:"Rewards",Header:()=>a("views.nodes.rewards"),accessor:e=>new m(e.current_award).div(1e8),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:p.md,sortType:b("Rewards")},{id:"Slash",Header:()=>a("views.nodes.slash"),accessor:e=>new m(e.slash_points),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:p.md,sortType:b("Slash")},{id:"Bond",Header:()=>a("views.nodes.bond"),accessor:e=>new m(e.total_bond).div(1e8),Cell:({cell:{value:e}})=>e.toCurrency(""),sortType:b("Bond")},{id:"ActiveBlock",Header:()=>"Active Block",accessor:e=>new m(e.active_block_height),Cell:({cell:{value:e}})=>e.toCurrency(""),minScreenSize:p.md,sortType:b("ActiveBlock")}],[o,i,d])},K=()=>{const o=O(),{data:t}=z(),{totalBond:i,totalActiveBond:d,totalStandbyBond:e,bondingAPYLabel:n}=Y(),l=r.useMemo(()=>{var v;return[{iconName:"chartPie",color:"yellow",label:a("views.nodes.totalBond"),value:`${o(i.getValue("string"))} (${i.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.totalBond")},{iconName:"lightning",color:"pink",label:a("views.nodes.detail.activeBond"),value:`${o(d.getValue("string"))} (${d.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.activeBondTooltip")},{iconName:"wifi",color:"red",label:a("views.nodes.detail.standbyBond"),value:`${o(e.getValue("string"))} (${e.toAbbreviation(1)} \u16B1)`,tooltip:a("views.nodes.detail.standbyBondTooltip")},{iconName:"chartArea",color:"purple",label:a("views.nodes.detail.bondingAPY"),value:n},{iconName:"chartArea2",color:"green",label:a("views.nodes.detail.dailyBondRewards"),value:`${o(new m({value:((v=t==null?void 0:t.blockRewards)==null?void 0:v.bondReward)||"0",decimal:8}).mul(14400).getValue("string"))} `},{iconName:"fire",color:"blueLight",label:a("views.nodes.detail.nextChurnHeight"),value:new m((t==null?void 0:t.nextChurnHeight)||0).getValue("number").toFixed(1)}]},[o,i,d,e,n,t]);return s.jsx(J,{scrollable:!0,itemWidth:265,list:l})},_=[{id:"Bond",desc:!0}],Q=()=>{const o=D(),{nodeWatchList:t}=j(),[i,d]=r.useState(0),[e,n]=r.useState(""),{data:l,refetch:v,isLoading:y,isFetching:f}=P(),x=G(v),g=r.useMemo(()=>l||[],[l]),A=r.useCallback(c=>{n(c.target.value)},[]),u=r.useMemo(()=>g.filter(c=>t.includes(c.node_address)),[t,g]),H=r.useMemo(()=>{const c=g.filter(h=>h.status===N[i]);return e?c.filter(h=>h.node_address.toLowerCase().includes(e.toLowerCase())):c},[g,e,i]),C=r.useCallback(({original:c})=>{o(R(c.node_address))},[o]);return s.jsxs(w,{col:!0,children:[s.jsx(M,{content:a("views.nodes.description"),keywords:" THORChain, Nodes, Overview, Management, DEFI, DEX",title:a("views.nodes.title")}),s.jsx(K,{}),(u==null?void 0:u.length)>0&&s.jsxs(w,{col:!0,className:"mt-4 mb-4",children:[s.jsx(V,{className:"mb-2 text-light-typo-primary dark:text-dark-typo-primary",children:`${a("views.nodes.watchList")} (${u.length})`}),s.jsx(B,{sortable:!0,columns:x,data:u,initialSort:_,loading:y||f,onRowClick:C})]}),s.jsxs(w,{col:!0,align:"start",className:"md:my-8 gap-4 !my-4 flex-grow lg:flex-row lg:justify-between",justify:"between",children:[s.jsxs(w,{alignCenter:!0,justify:"between",children:[s.jsx("div",{className:"mx-2.5",children:s.jsx(F,{border:"rounded",icon:"search",onChange:A,placeholder:"Search node address",value:e})}),s.jsx(W,{className:"no-underline",to:"/node-manager",children:s.jsx(S,{size:"sm",variant:"outlineSecondary",children:a("common.manage")})})]}),s.jsx("div",{className:"flex mx-[10px]",children:s.jsx(E,{activeIndex:i,onChange:d,options:N})})]}),s.jsx(B,{sortable:!0,columns:x,data:H,initialSort:_,loading:y||f,onRowClick:C})]})},X=Q;export{X as default};
